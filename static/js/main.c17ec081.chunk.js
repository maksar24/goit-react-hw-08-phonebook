(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{110:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(30),o=n.n(r),s=n(20),i=n(7),u=n(48),l=(n(65),n(66),n(4)),b=n(49),d=n.n(b),j=n(1);function p(e){var t=e.children;return Object(j.jsx)("div",{className:d.a.container,children:t})}var f=n(26),O=n.n(f),m=function(e){return e.userAuth.isLoggedIn},h=function(e){return e.userAuth.user.name},x=function(){var e=Object(i.c)(m);return Object(j.jsxs)("nav",{children:[Object(j.jsx)(s.b,{exact:!0,to:"/",className:O.a.link,activeClassName:O.a.activeLink,children:"Home"}),e&&Object(j.jsx)(s.b,{to:"/contacts",className:O.a.link,activeClassName:O.a.activeLink,children:"Contacts"})]})},v=n(27),g=n.n(v),_=function(){return Object(j.jsxs)("nav",{children:[Object(j.jsx)(s.b,{to:"/register",className:g.a.link,activeClassName:g.a.activeLink,children:"Sign up"}),Object(j.jsx)(s.b,{to:"/login",className:g.a.link,activeClassName:g.a.activeLink,children:"Log in"})]})},k=n(34),w=n.n(k),N=n.p+"static/media/DefaultPicture.a2822262.png",y=n(10),C=n.n(y),L=n(22),S=n(18),A=n.n(S),T=n(5);A.a.defaults.baseURL="https://connections-api.herokuapp.com";var E=function(e){A.a.defaults.headers.common.Authorization="Bearer ".concat(e)},F=function(){A.a.defaults.headers.common.Authorization=""},R=Object(T.c)("auth/register",function(){var e=Object(L.a)(C.a.mark((function e(t){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.post("/users/signup",t);case 3:return n=e.sent,a=n.data,E(a.token),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),z=Object(T.c)("auth/login",function(){var e=Object(L.a)(C.a.mark((function e(t){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.post("/users/login",t);case 3:return n=e.sent,a=n.data,E(a.token),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),B=Object(T.c)("auth/logout",Object(L.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.post("/users/logout");case 3:F(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])}))));function I(){var e=Object(i.b)(),t=Object(i.c)(h),n=N;return Object(j.jsxs)("div",{className:w.a.container,children:[Object(j.jsx)("img",{src:n,alt:"",width:"32",className:w.a.avatar}),Object(j.jsxs)("span",{className:w.a.name,children:["Welcome, ",t]}),Object(j.jsx)("button",{type:"button",onClick:function(){return e(B())},children:"Log out"})]})}var M=n(51),D=n.n(M);function P(){var e=Object(i.c)(m);return Object(j.jsxs)("header",{className:D.a.header,children:[Object(j.jsx)(x,{}),e?Object(j.jsx)(I,{}):Object(j.jsx)(_,{})]})}var U=n.p+"static/media/Backdrop.db75e70e.png",V=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:U,width:"100%",alt:""})})},J=n(15),Z=n(52),X=n.n(Z),q=function(e){var t=e.onLoadMore,n=e.contentBtn,a=e.disabled;return Object(j.jsx)("button",{disabled:a,onClick:t,className:X.a.button,children:n})};q.defaultProps={onLoadMore:function(){return null},disabled:!1};var H=q,K=n(19),W=n.n(K);function Y(){var e=Object(i.b)(),t=Object(a.useState)(""),n=Object(J.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(""),s=Object(J.a)(o,2),u=s[0],l=s[1],b=Object(a.useState)(""),d=Object(J.a)(b,2),p=d[0],f=d[1],O=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":return r(a);case"email":return l(a);case"password":return f(a);default:return}};return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(R({name:c,email:u,password:p})),r(""),l(""),f("")},className:W.a.form,autoComplete:"off",children:[Object(j.jsxs)("label",{className:W.a.label,children:[Object(j.jsx)("span",{className:W.a.labelText,children:"Name"}),Object(j.jsx)("input",{type:"text",name:"name",value:c,onChange:O,placeholder:"Enter name",className:W.a.input})]}),Object(j.jsxs)("label",{className:W.a.label,children:[Object(j.jsx)("span",{className:W.a.labelText,children:"Email"}),Object(j.jsx)("input",{type:"email",name:"email",value:u,onChange:O,placeholder:"Enter email",className:W.a.input})]}),Object(j.jsxs)("label",{className:W.a.label,children:[Object(j.jsx)("span",{className:W.a.labelText,children:"Password"}),Object(j.jsx)("input",{type:"password",name:"password",value:p,onChange:O,placeholder:"Enter password",className:W.a.input})]}),Object(j.jsx)(H,{type:"submit",contentBtn:"Sign up"})]})})}var Q=n(23),$=n.n(Q);function G(){var e=Object(i.b)(),t=Object(i.c)(m),n=Object(a.useState)(""),c=Object(J.a)(n,2),r=c[0],o=c[1],s=Object(a.useState)(""),u=Object(J.a)(s,2),l=u[0],b=u[1],d=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"email":return o(a);case"password":return b(a);default:return}};return Object(j.jsx)("div",{children:!t&&Object(j.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(z({email:r,password:l})),o(""),b("")},className:$.a.form,autoComplete:"off",children:[Object(j.jsxs)("label",{className:$.a.label,children:[Object(j.jsx)("span",{className:$.a.labelText,children:"Email"}),Object(j.jsx)("input",{type:"email",name:"email",value:r,onChange:d,placeholder:"Enter email",className:$.a.input})]}),Object(j.jsxs)("label",{className:$.a.label,children:[Object(j.jsx)("span",{className:$.a.labelText,children:"Password"}),Object(j.jsx)("input",{type:"password",name:"password",value:l,onChange:d,placeholder:"Enter password",className:$.a.input})]}),Object(j.jsx)(H,{type:"submit",contentBtn:"Sign up"})]})})}var ee,te,ne,ae,ce,re,oe,se,ie=function(){return Object(j.jsx)("div",{children:Object(j.jsx)(G,{})})},ue=n(16),le=n(17),be=le.a.form(ee||(ee=Object(ue.a)(["\n  border: 5px solid #21ce3b;\n  width: 400px;\n  margin: 0 auto;\n  padding: 25px 15px;\n  border-radius: 10px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),de=le.a.label(te||(te=Object(ue.a)(["\n  margin-bottom: 25px;\n"]))),je=le.a.input(ne||(ne=Object(ue.a)(["\n  border: 3px solid #48dca9;\n  border-radius: 5px;\n  width: 300px;\n  margin-left: 15px;\n  &:focus {\n    background-color: #47dca9;\n  }\n"]))),pe=le.a.button(ae||(ae=Object(ue.a)(["\n  border-color: aliceblue;\n  border-radius: 5px;\n  cursor: pointer;\n  background-color: #47dca9;\n  width: 95px;\n  &:focus {\n    border-color: #21ce3b;\n  }\n"]))),fe=function(e){var t=e.onSubmit,n=Object(a.useState)(""),c=Object(J.a)(n,2),r=c[0],o=c[1],s=Object(a.useState)(""),i=Object(J.a)(s,2),u=i[0],l=i[1],b=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":o(a);break;case"number":l(a);break;default:return}};return Object(j.jsxs)(be,{onSubmit:function(e){e.preventDefault(),t({name:r,number:u}),o(""),l("")},children:[Object(j.jsxs)(de,{children:["Name",Object(j.jsx)(je,{type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,onChange:b,value:r})]}),Object(j.jsxs)(de,{children:["Number",Object(j.jsx)(je,{type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0,onChange:b,value:u})]}),Object(j.jsx)(pe,{children:"Add contact"})]})},Oe=le.a.ul(ce||(ce=Object(ue.a)(["\n  list-style: none;\n"]))),me=le.a.li(re||(re=Object(ue.a)(["\n  margin-bottom: 20px;\n"]))),he=le.a.button(oe||(oe=Object(ue.a)(["\n  border-color: aliceblue;\n  cursor: pointer;\n  border-radius: 5px;\n  background-color: #47dca9;\n  margin-left: 25px;\n  &:focus {\n    border-color: #21ce3b;\n  }\n"]))),xe=function(e){var t=e.options,n=e.onDelete;return Object(j.jsx)(Oe,{children:t.map((function(e){var t=e.name,a=e.number,c=e.id;return Object(j.jsxs)(me,{children:[t,": ",a,Object(j.jsx)(he,{onClick:function(){return n(c)},children:"Delete"})]},c)}))})},ve=le.a.input(se||(se=Object(ue.a)(["\n  border: 3px solid #48dca9;\n  border-radius: 5px;\n  width: 300px;\n  margin-left: 15px;\n  &:focus {\n    background-color: #47dca9;\n  }\n"]))),ge=function(e){var t=e.type,n=e.label,a=e.getSearchName;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h3",{children:"Find contacts by name"}),Object(j.jsx)(ve,{type:t,onChange:a,placeholder:n})]})};ge.defaultProps={type:"text"};var _e=n(53),ke=n.n(_e),we=n(54),Ne=n.n(we),ye=function(){return Object(j.jsx)(ke.a,{className:Ne.a.Loader,type:"Rings",color:"#00FA9A",height:800,width:900,timeout:3e3})},Ce=n(31),Le=function(e){return e.contacts.isLoading},Se=Object(Ce.a)([function(e){return e.contacts.entities},function(e){return e.contacts.filter}],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)})).sort((function(e,t){var n=e.name.toUpperCase(),a=t.name.toUpperCase();return n<a?-1:n>a?1:0}))})),Ae=Object(T.c)("contacts/fetchContacts",Object(L.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.get("/contacts");case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),Te=Object(T.c)("contacts/addContacts",function(){var e=Object(L.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.post("/contacts",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),Ee=Object(T.c)("contacts/deleteContacts",function(){var e=Object(L.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.delete("/contacts/".concat(t));case 3:return e.abrupt("return",t);case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}());function Fe(){var e=Object(i.b)(),t=Object(i.c)(Se),n=Object(i.c)(Le),c=Object(a.useState)(""),r=Object(J.a)(c,2),o=(r[0],r[1]);Object(a.useEffect)((function(){e(Ae())}),[e]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{children:"Phonebook"}),Object(j.jsx)(fe,{onSubmit:function(n){t.map((function(e){return e.name})).includes(n.name)?alert("".concat(n.name," is already in contacts")):e(Te(n))}}),Object(j.jsx)("h2",{children:"Contacts"}),Object(j.jsx)(ge,{getSearchName:function(e){o(e.target.value)},label:"Enter contact name"}),n&&Object(j.jsx)(ye,{}),t&&Object(j.jsx)(xe,{options:t,onDelete:function(t){return e(Ee(t))}})]})}var Re,ze,Be,Ie=function(){return Object(j.jsxs)(p,{children:[Object(j.jsx)(P,{}),Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{exact:!0,path:"/",component:V}),Object(j.jsx)(l.a,{path:"/register",component:Y}),Object(j.jsx)(l.a,{path:"/login",component:ie}),Object(j.jsx)(l.a,{path:"/contacts",component:Fe})]})]})},Me=n(33),De=n(21),Pe=n(55),Ue=n.n(Pe),Ve={user:{name:null,email:null},token:null,isLoggedIn:!1},Je=Object(T.e)({name:"auth",initialState:Ve,extraReducers:function(e){e.addCase(R.fulfilled,(function(e,t){var n=t.payload;e.token=n.token,e.user=n.user,e.isLoggedIn=!0})).addCase(z.fulfilled,(function(e,t){var n=t.payload;e.token=n.token,e.user=n.user,e.isLoggedIn=!0})).addCase(B.fulfilled,(function(e){e.user=Ve,e.token=Ve.token,e.isLoggedIn=!1}))}}).reducer,Ze=n(6),Xe=n(8),qe=Object(T.b)("contacts/changeFilter"),He=Object(T.d)([],(Re={},Object(Ze.a)(Re,Ae.fulfilled,(function(e,t){return t.payload.data})),Object(Ze.a)(Re,Te.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(Me.a)(e),[n.data])})),Object(Ze.a)(Re,Ee.fulfilled,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),Re)),Ke=Object(T.d)(!1,(ze={},Object(Ze.a)(ze,Ae.pending,(function(){return!0})),Object(Ze.a)(ze,Ae.fulfilled,(function(){return!1})),Object(Ze.a)(ze,Ae.rejected,(function(){return!1})),Object(Ze.a)(ze,Ee.fulfilled,(function(){return!1})),Object(Ze.a)(ze,Ee.pending,(function(){return!0})),Object(Ze.a)(ze,Ee.rejected,(function(){return!1})),Object(Ze.a)(ze,Te.fulfilled,(function(){return!1})),Object(Ze.a)(ze,Te.pending,(function(){return!0})),Object(Ze.a)(ze,Te.rejected,(function(){return!1})),ze)),We=Object(T.d)(null,(Be={},Object(Ze.a)(Be,Ae.rejected,(function(e,t){return t.payload})),Object(Ze.a)(Be,Ae.pending,(function(){return null})),Object(Ze.a)(Be,Te.pending,(function(){return null})),Object(Ze.a)(Be,Te.rejected,(function(e,t){return t.payload})),Object(Ze.a)(Be,Ee.pending,(function(){return null})),Object(Ze.a)(Be,Ee.rejected,(function(e,t){return t.payload})),Be)),Ye=Object(T.d)("",Object(Ze.a)({},qe,(function(e,t){return t.payload}))),Qe=Object(Xe.b)({entities:He,isLoading:Ke,error:We,filter:Ye}),$e=Object(Me.a)(Object(T.f)({serializableCheck:{ignoredActions:[De.a,De.f,De.b,De.c,De.d,De.e]}})),Ge={key:"auth",storage:Ue.a,whitelist:["token"]},et=Object(T.a)({reducer:{userAuth:Object(De.g)(Ge,Je),contacts:Qe},middleware:$e,devTools:!1}),tt=Object(De.h)(et);o.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(i.a,{store:et,children:Object(j.jsx)(u.a,{loading:null,persistor:tt,children:Object(j.jsx)(s.a,{children:Object(j.jsx)(Ie,{})})})})}),document.getElementById("root"))},19:function(e,t,n){e.exports={form:"RegisterView_form__3W744",label:"RegisterView_label__1ds6z",labelText:"RegisterView_labelText__3ZMfb",input:"RegisterView_input__3ngNK"}},23:function(e,t,n){e.exports={form:"LoginForm_form__26oKu",label:"LoginForm_label__1Xydo",labelText:"LoginForm_labelText__2sAx9",input:"LoginForm_input__1FN1u"}},26:function(e,t,n){e.exports={link:"Navigation_link__1NJne",activeLink:"Navigation_activeLink__HCj5d"}},27:function(e,t,n){e.exports={link:"AuthNav_link__rQr67",activeLink:"AuthNav_activeLink__1YOI3"}},34:function(e,t,n){e.exports={container:"UserMenu_container__2vnX3",avatar:"UserMenu_avatar__hYEt7",name:"UserMenu_name__1pRVb"}},49:function(e,t,n){e.exports={container:"Container_container__34iIj"}},51:function(e,t,n){e.exports={header:"Appbar_header__1pdxX"}},52:function(e,t,n){e.exports={button:"Button_button__2RkNT"}},54:function(e,t,n){e.exports={Loader:"Loader_Loader__g4T21"}},65:function(e,t,n){},66:function(e,t,n){}},[[110,1,2]]]);
//# sourceMappingURL=main.c17ec081.chunk.js.map